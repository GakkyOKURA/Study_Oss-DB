
= OSS-DBãƒ¡ãƒ¢

[cols="^.^1,3a", options="header"]
|===
|é …ç›® |å†…å®¹

|INã¨NOT IN
|æ¬¡ã®ã‚¯ã‚¨ãƒªã¯åŒç¾©ã§ã‚ã‚‹ +
select * from member where éƒ¨ç½² in ('å–¶æ¥­', 'é–‹ç™º', 'ç·å‹™'); +
select * from member where éƒ¨ç½² = 'å–¶æ¥­' or éƒ¨ç½² = 'é–‹ç™º' or éƒ¨ç½² = 'ç·å‹™';

select * from member where éƒ¨ç½² NOT IN ('å–¶æ¥­', 'é–‹ç™º', 'ç·å‹™'); +
select * from member where éƒ¨ç½² <> 'å–¶æ¥­' and éƒ¨ç½² <> 'é–‹ç™º' and éƒ¨ç½² <> 'ç·å‹™'; +
ï¼ˆã¡ãªã¿ã«<>ã¯SQLã§ã¯ã€Œâ‰ ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ Postgreã®å ´åˆã¯ != ã§ã‚‚OKï¼‰

|ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã‚’æŒã¤ã‚«ãƒ©ãƒ ã¸ã®NULLæŒ¿å…¥
|ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã‚’æŒã¤ã‚«ãƒ©ãƒ ã«NULLã‚’æŒ¿å…¥ã™ã‚‹å ´åˆã€è¤‡æ•°ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã«NULLã‚’æŒ¿å…¥å¯èƒ½ã§ã‚ã‚Šã€NULLå€¤ã¯é‡è¤‡ã—ã¦ã‚‚ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„é•åã«ãªã‚‰ãªã„ã€‚ +

ğŸ” ç†ç”± +
PostgreSQLã¯ã€SQLæ¨™æº–ã«æº–æ‹ ã—ã¦ãŠã‚Šã€NULL ã¯ã€ŒæœªçŸ¥ã®å€¤ã€ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

UNIQUE åˆ¶ç´„ã¯ã€Œæ—¢çŸ¥ã®å€¤ãŒé‡è¤‡ã—ã¦ã„ãªã„ã“ã¨ã€ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€NULL ã¯æ¯”è¼ƒã§ããªã„ï¼ˆNULL = NULL ã¯ FALSE ã§ã¯ãªã UNKNOWNï¼‰ãŸã‚ã€è¤‡æ•°ã® NULL ã¯äº’ã„ã«ç­‰ã—ã„ã¨ã¯è¦‹ãªã•ã‚Œã¾ã›ã‚“ã€‚ +

CREATE TABLE sample ( +
    id SERIAL PRIMARY KEY, +
    email TEXT UNIQUE +
); +

INSERT INTO sample (email) VALUES (NULL); -- OK +
INSERT INTO sample (email) VALUES (NULL); -- OKï¼ˆ2ã¤ç›®ã®NULLã‚‚è¨±å®¹ã•ã‚Œã‚‹ï¼‰ +
INSERT INTO sample (email) VALUES ('test@example.com'); -- OK +
INSERT INTO sample (email) VALUES ('test@example.com'); -- ã‚¨ãƒ©ãƒ¼ï¼ˆé‡è¤‡ï¼‰ +

|ãƒ©ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
|PostgreSQLã«ã¯ã€ãƒ©ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã„ã†å·¨å¤§ãªãƒã‚¤ãƒŠãƒªãƒ»ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚ +
æ ¼ç´å…ˆã¯ã‚·ã‚¹ãƒ†ãƒ ã‚«ã‚¿ãƒ­ã‚°ã®ã€Œpg_largeobjectã€ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãªã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ ¼ç´ã•ã‚ŒãŸOIDã«ã‚ˆã£ã¦ç´ã¥ã‘ã‚‰ã‚Œã¾ã™ã€‚ +
ãƒ©ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼ç´ã™ã‚‹ã¨ã€ãã®OIDãŒè¿”ã•ã‚Œã¾ã™ã€‚ +
æ‰±ã†ã“ã¨ã®ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºä¸Šé™ã¯ver9.3ä»¥é™ã§4TBã§ã™ã€‚ +
ãƒ©ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ ¼ç´ãƒ»å–å¾—ã¯ã€\lo_importã€\lo_exportã‚³ãƒãƒ³ãƒ‰ã§è¡Œã„ã¾ã™ã€‚

|æ–°è¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®Template0 ã¨ Template1
|æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹éš›ã€-Tã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã²ãªå½¢ã¨ãªã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æŒ‡å®šã§ãã¾ã™ã€‚ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã—ãŸæ™‚ã®template0ã¨template1ã§ã™ã€‚ä½•ã‚‚æŒ‡å®šã—ãªã„å ´åˆã¯ã€template1ã«ãªã‚Šã¾ã™ã€‚ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ­ã‚±ãƒ¼ãƒ«ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è¨­å®šã‚’å¼•ãç¶™ãã¾ã™ã€‚ +
template1ã‚’æŒ‡å®šã—ãŸå ´åˆã€template1ã«è¨­å®šã•ã‚ŒãŸã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ­ã‚±ãƒ¼ãƒ«ã¯å¤‰æ›´ãŒã§ãã¾ã›ã‚“ã€‚ +
ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãƒ­ã‚±ãƒ¼ãƒ«ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã¯åˆ¥ã®è¨­å®šã«ã—ãŸã„å ´åˆã¯ã€template0ã‚’æŒ‡å®šã—ãŸä¸Šã§ã€-Eã€-lã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—å¤‰æ›´ã—ã¾ã™ã€‚ +
template0ä»¥å¤–ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€-Eã€-lã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦å¤‰æ›´ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ã€createdbã‚³ãƒãƒ³ãƒ‰ã¯å¤±æ•—ã—ã¾ã™ã€‚

|å®šç¾©ã—ãŸã‚¹ã‚­ãƒ¼ãƒã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
|å®šç¾©ã—ãŸç‰¹å®šã®ã‚¹ã‚­ãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„å ´åˆã€search_pathãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¯¾è±¡ã®ã‚¹ã‚­ãƒ¼ãƒã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¯è¤‡æ•°ã®ã‚¹ã‚­ãƒ¼ãƒã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã€[red]#å·¦å´ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰å„ªå…ˆçš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¾ã™ã€‚# +

æ¬¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ã¾ã™ +
image:ã‚¹ã‚­ãƒ¼ãƒå®šç¾©.jpg[] +
ä»¥ä¸‹ã®SQLæ–‡ã‚’å®Ÿè¡Œã—ã¾ã™ +

SET search_path TO S001,public,S002; +
SELECT count(*) FROM item; +

ã“ã®å ´åˆã€S001ã‚¹ã‚­ãƒ¼ãƒã®itemãƒ†ãƒ¼ãƒ–ãƒ«ãŒå‚ç…§ã•ã‚Œã¾ã™ã€‚
ãã®ãŸã‚ã€çµæœã¯S001ã‚¹ã‚­ãƒ¼ãƒã®itemãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ã§ã‚ã‚‹1ãŒè¿”ã•ã‚Œã¾ã™ã€‚

|INSERTæ–‡ã«SELECTæ–‡ã‚’çµ„ã¿åˆã‚ã›ã‚‹
|INSERTæ–‡ã§tableã«æ–°ãŸãªãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥ã™ã‚‹éš›ã€SELECTæ–‡ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ +
ã“ã‚Œã‚’ã™ã‚‹ã¨ã€VALUEå¥ã‚’ä½¿ç”¨ã›ãšã«ã€ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥ãŒå¯èƒ½ã¨ãªã‚‹ã€‚ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®ç”»åƒã‚’å‚è€ƒã«ã€‚ +
image:INSERT + SELECT.png[]

|drop user æ›¸å¼
|ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ã€Œpostgresã€ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¦ãƒ¼ã‚¶ã€Œuserã€ã‚’å‰Šé™¤ã—ãŸã„ã€‚æ­£ã—ã„ã‚³ãƒãƒ³ãƒ‰ã¯ +
ãƒ»dropuser -U postgres user +
ãƒ»dropuser -U postgres -i user +
ã‚¹ãƒ¼ãƒ‘ãƒ¦ãƒ¼ã‚¶åã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã€Œ-Uã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«æ³¨æ„ã€‚

|ã‚¹ã‚­ãƒ¼ãƒã®è‡ªå‹•ä½œæˆ
|PostgreSQLã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã®ä½œæˆæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§publicã‚¹ã‚­ãƒ¼ãƒãŒä½œæˆã•ã‚Œã¾ã™ã€‚

|INTERVALå‹
|INTERVALå‹ã¯ã€å˜ä½ã‚’æ˜ç¤ºã—ãªã„ã€ã¾ãŸã¯ã‚­ãƒ£ã‚¹ãƒˆã‚’è¡Œã‚ãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€Œç§’ã€ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ã€‚ +
ãªã®ã§ã€ã‚‚ã—ã€Œç¾åœ¨æ™‚åˆ»ã®ï¼“ã‹æœˆå‰ã®æ—¥æ™‚ã‚’å–å¾—ã—ãŸã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ +
SELECT now() - '3 month'::interval; +
SELECT now() - interval '3 month'; +

|COPYã‚³ãƒãƒ³ãƒ‰ã¨ã‚¹ãƒ¼ãƒ‘ãƒ¦ãƒ¼ã‚¶æ¨©é™
|\copyã‚³ãƒãƒ³ãƒ‰ã¯å®Ÿè¡Œã«ç‰¹åˆ¥ãªæ¨©é™ã‚’å¿…è¦ã¨ã—ã¾ã›ã‚“ãŒã€COPYã‚³ãƒãƒ³ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶æ¨©é™ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ æ¨™æº–å‡ºåŠ›ã¸ã®ã‚³ãƒ”ãƒ¼ã¯COPYã‚³ãƒãƒ³ãƒ‰ã§ã‚ã£ã¦ã‚‚ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶æ¨©é™ã¯ä¸è¦ã§ã™ã€‚ +
image:COPYã‚³ãƒãƒ³ãƒ‰_ã‚¹ãƒ¼ãƒ‘ãƒ¦ãƒ¼ã‚¶æ¨©é™.jpg[]

|postgre.confã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨åæ˜ ã‚¿ã‚¤ãƒŸãƒ³ã‚°
|image:postgre.confãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨åæ˜ ã‚¿ã‚¤ãƒŸãƒ³ã‚°.jpg[]

|FOR EACH ROW ã¨ FOR EACH STATEMENT
|ãƒˆãƒªã‚¬ãƒ¼ã‚’å®šç¾©ã™ã‚‹éš›ã€FOR EACH ROW ã¨ FOR EACH STATEMENT ã®2ç¨®é¡ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã€‚ +
FOR EACH ROW ã¯ã€å¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«ã®å„è¡Œã«å¯¾ã—ã¦ãƒˆãƒªã‚¬ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚ +
FOR EACH STATEMENT ã¯ã€å¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦1å›ã ã‘ãƒˆãƒªã‚¬ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚ +
ä¾‹ãˆã°ã€å¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«ã«10è¡Œã®ãƒ‡ãƒ¼ã‚¿ãŒæŒ¿å…¥ã•ã‚ŒãŸå ´åˆã€ +
FOR EACH ROW ã§ã¯10å›ãƒˆãƒªã‚¬ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ãŒã€ +
FOR EACH STATEMENT ã§ã¯1å›ã ã‘ãƒˆãƒªã‚¬ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚ +
çœç•¥ã—ãŸå ´åˆã€FOR EACH STATEMENTãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ãªã‚‹ã€‚

|ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¹ã‚­ãƒ¼ãƒ
|PostgreSQLã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ–°è¦ä½œæˆã™ã‚‹ã¨é€šå¸¸ã€Œ3ã€œ6å€‹ç¨‹åº¦ã®ã‚¹ã‚­ãƒ¼ãƒã€ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å­˜åœ¨ã—ã¾ã™ã€‚ä¸»ã« publicã€pg_catalogã€information_schema ãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚ +

[cols="^.^1,3", options="header"]
!===
!ã‚¹ã‚­ãƒ¼ãƒå !èª¬æ˜
!public !ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½œæˆã•ã‚Œã‚‹ã‚¹ã‚­ãƒ¼ãƒã€‚ãƒ¦ãƒ¼ã‚¶ãŒä½œæˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ç‰¹ã«æŒ‡å®šã—ãªã„é™ã‚Šã“ã®ã‚¹ã‚­ãƒ¼ãƒã«æ ¼ç´ã•ã‚Œã‚‹ã€‚ 
!pg_catalog !PostgreSQLã®ã‚·ã‚¹ãƒ†ãƒ ã‚«ã‚¿ãƒ­ã‚°ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ¼ãƒã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã€ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã€æ¨©é™æƒ…å ±ãªã©ï¼‰ãŒå«ã¾ã‚Œã‚‹ã€‚
!information_schema !SQLæ¨™æº–ã«æº–æ‹ ã—ãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ¼ãƒã€‚ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ã‚¹ãƒ†ãƒ é–“ã§ã®äº’æ›æ€§ã‚’æä¾›ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚
!pg_toast !å¤§ããªãƒ‡ãƒ¼ã‚¿å‹ï¼ˆTOAST: The Oversized-Attribute Storage Techniqueï¼‰ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®ã‚¹ã‚­ãƒ¼ãƒã€‚å¤§ããªãƒ†ã‚­ã‚¹ãƒˆã‚„ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã‚‹ã€‚
!pg_temp_nnn !ä¸€æ™‚ã‚¹ã‚­ãƒ¼ãƒã€‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ã”ã¨ã«ç•°ãªã‚‹ç•ªå·ãŒä»˜ä¸ã•ã‚Œã€ä¸€æ™‚ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ä¸€æ™‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚
!pg_internal !PostgreSQLã®å†…éƒ¨ä½¿ç”¨å°‚ç”¨ã®ã‚¹ã‚­ãƒ¼ãƒã€‚é€šå¸¸ã€ãƒ¦ãƒ¼ã‚¶ãŒç›´æ¥æ“ä½œã™ã‚‹ã“ã¨ã¯ãªã„ã€‚ 
!===

|template0ã¨template1ã®ä½¿ã„åˆ†ã‘
|ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚„ãƒ­ã‚±ãƒ¼ãƒ«ç­‰ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆå‰ã«è¨­å®šã™ã‚‹é …ç›®ã‚’å¤‰æ›´ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ãŸã„å ´åˆã¯ã€template0ã‚’æŒ‡å®šã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚ +
ãƒ†ãƒ¼ãƒ–ãƒ«ã‚„ã‚¹ã‚­ãƒ¼ãƒæ§‹é€ ã€é–¢æ•°ãªã©ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆå¾Œã«è¨­å®šã§ãã‚‹é …ç›®ã‚’å¤‰æ›´ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ãŸã„å ´åˆã¯ã€template1ã‚’æŒ‡å®šã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚ +

|ãƒˆãƒªã‚¬ãƒ¼ã®å®šç¾©å˜ä½
|ãƒˆãƒªã‚¬ãƒ¼ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã”ã¨ã«ä½œæˆã•ã‚Œã‚‹ã€‚ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã”ã¨ã§ã¯ãªã„ã€‚
ã“ã‚Œã¯ã€ãƒˆãƒªã‚¬ãƒ¼ã®åŸºæœ¬æ§‹é€ ãŒã€Pç‰¹å®šã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦ã€Œã‚ã‚‹æ“ä½œï¼ˆINSERTã€UPDATEã€DELETEãªã©ï¼‰ãŒè¡Œã‚ã‚ŒãŸã¨ãã€ã«è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ã€‚ +
ã ã‹ã‚‰ONã§å¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«åã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ +
CREATE TRIGGER ãƒˆãƒªã‚¬ãƒ¼å +
AFTER ï¼ˆã¾ãŸã¯BEFOREï¼‰ INSERT OR UPDATE ON å¯¾è±¡ãƒ†ãƒ¼ãƒ–ãƒ«å +
FOR EACH ROW ï¼ˆã¾ãŸã¯FOR EACH STATEMENTï¼‰ +
EXECUTE FUNCTION é–¢æ•°å();

|psqlã®æ­£ä½“
|psql ã¯ PostgreSQL ã«ä»˜å±ã™ã‚‹ å…¬å¼ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã€Windowsã§ã€ŒSQL Shellã€ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã®æ­£ä½“ãŒ psql ã§ã™ã€‚ +
psql ã¯ PostgreSQL ã«æ¥ç¶šã—ã¦ã€SQLæ–‡ã‚’å®Ÿè¡Œã—ãŸã‚Šã€ãƒ¡ã‚¿ã‚³ãƒãƒ³ãƒ‰ï¼ˆ\dt ã‚„ \l ãªã©ï¼‰ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ“ä½œã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ +
Windowsã§ã¯ã€ŒSQL Shell (psql)ã€ã¨ã„ã†åå‰ã§ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒä½œã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ã¯ psql.exe ã§ã™ã€‚

|ãƒ¡ã‚¿ã‚³ãƒãƒ³ãƒ‰ã¨SQLã‚³ãƒãƒ³ãƒ‰ã®é•ã„
|** ğŸ§  ãƒ¡ã‚¿ã‚³ãƒãƒ³ãƒ‰ã¨ã¯ï¼ˆ\ ã§å§‹ã¾ã‚‹ã‚³ãƒãƒ³ãƒ‰ï¼‰ +
* psqlï¼ˆSQL Shellï¼‰å°‚ç”¨ã®ã‚³ãƒãƒ³ãƒ‰
* PostgreSQLã®æ“ä½œã‚„æƒ…å ±å–å¾—ã‚’ç°¡å˜ã«ã™ã‚‹è£œåŠ©ã‚³ãƒãƒ³ãƒ‰
* SQLæ–‡ã§ã¯ãªã„ã®ã§ã€ã‚»ãƒŸã‚³ãƒ­ãƒ³ï¼ˆ;ï¼‰ã¯ä¸è¦ +

** ğŸ§¾ SQLæ–‡ã¨ã¯ï¼ˆSELECT ã‚„ INSERT ãªã©ï¼‰
* PostgreSQLã®æ¨™æº–SQLæ§‹æ–‡
* ãƒ‡ãƒ¼ã‚¿ã®æ“ä½œã‚„å®šç¾©ã‚’è¡Œã†æœ¬å‘½ã‚³ãƒãƒ³ãƒ‰
* ã‚»ãƒŸã‚³ãƒ­ãƒ³ï¼ˆ;ï¼‰ã§çµ‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹
[cols="^.^1,3,3", options="header"]
!===
!æ¯”è¼ƒé …ç›® !ãƒ¡ã‚¿ã‚³ãƒãƒ³ãƒ‰ !SQLæ–‡
!æ›¸å¼	!\ ã§å§‹ã¾ã‚‹	!é€šå¸¸ã®SQLæ§‹æ–‡
!å¯¾è±¡	!psql ã®æ“ä½œ	!ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ“ä½œ
!ã‚»ãƒŸã‚³ãƒ­ãƒ³	!ä¸è¦	!å¿…è¦
!å®Ÿè¡Œå ´æ‰€	!psql å†…ã®ã¿	!psql ã§ã‚‚ã‚¢ãƒ—ãƒªã§ã‚‚OK
!ä¾‹	!\dt, \q	!SELECT, INSERT
!===

|[red]#PostgreSQLã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§#
|pg_dumpç­‰ã€psqlã§ã¯å®Ÿè¡Œã§ããšã€OSã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚³ãƒãƒ³ãƒ‰ã¨å‘¼ã¶ã€‚ +
ä¸»ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚ +

**ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒç³»**
[cols="^.^1,3", options="header"]
!===
!ã‚³ãƒãƒ³ãƒ‰ !ç›®çš„
!pg_dump	!å˜ä¸€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è«–ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆSQLã‚„ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å½¢å¼ï¼‰
!pg_dumpall	!PostgreSQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å…¨ä½“ï¼ˆå…¨DBï¼‹ãƒ­ãƒ¼ãƒ«ãªã©ï¼‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
!pg_restore	!pg_dump ã§ä½œæˆã—ãŸã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«ã®å¾©å…ƒ
!===
**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒ¦ãƒ¼ã‚¶ç®¡ç†ç³»**
[cols="^.^1,3", options="header"]
!===
!ã‚³ãƒãƒ³ãƒ‰ !ç›®çš„
!createdb	!æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆï¼ˆCREATE DATABASE ã®ãƒ©ãƒƒãƒ‘ãƒ¼ï¼‰
!dropdb	!ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‰Šé™¤ï¼ˆDROP DATABASE ã®ãƒ©ãƒƒãƒ‘ãƒ¼ï¼‰
!createuser	!æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆãƒ­ãƒ¼ãƒ«ï¼‰ã®ä½œæˆ
!dropuser	!ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆãƒ­ãƒ¼ãƒ«ï¼‰ã®å‰Šé™¤
!psql	!SQL Shellï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰ã¨ã—ã¦ã®æ“ä½œ
!===
'createdb'ã‚„'dropdb'ã«æ³¨æ„ã€‚ +
ã“ã‚Œã‚‰ã¯psqlå†…ã§ã¯ãªãã€OSã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å®Ÿè¡Œã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚psqlå†…ã§ä½¿ç”¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚ +
psqlå†…ã§å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€createdbã®å ´åˆã¯"CREATE DATABASE"ã€dropdbã®å ´åˆã¯"DROP DATABASE"ã‚’ä½¿ç”¨ã™ã‚‹ã€‚ +

**æƒ…å ±å–å¾—ãƒ»è¨ºæ–­ç³»**
[cols="^.^1,3", options="header"]
!===
!ã‚³ãƒãƒ³ãƒ‰ !ç›®çš„
!pg_isready	!PostgreSQLã‚µãƒ¼ãƒãƒ¼ãŒæ¥ç¶šå¯èƒ½ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯
!pg_config	!PostgreSQLã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ‘ã‚¹ã‚„è¨­å®šæƒ…å ±ã‚’è¡¨ç¤º
!pg_ctl	!PostgreSQLã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ãƒ»åœæ­¢ãƒ»å†èµ·å‹•ãªã©ã‚’åˆ¶å¾¡
!===

**ã‚¯ãƒ©ã‚¹ã‚¿ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç³»**
[cols="^.^1,3", options="header"]
!===
!ã‚³ãƒãƒ³ãƒ‰ !ç›®çš„
!initdb	!PostgreSQLã‚¯ãƒ©ã‚¹ã‚¿ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã®åˆæœŸåŒ–
!pg_basebackup	!ç‰©ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å–å¾—ï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
!pg_archivecleanup	!WALãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç®¡ç†ï¼‰
!pg_rewind	!ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’éå»ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«å·»ãæˆ»ã™
!===

|CLUSTERã‚³ãƒãƒ³ãƒ‰
|ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦ã³æ›¿ãˆã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’CLUSTERã¨ã„ã†ã€‚

|REINDEXã‚³ãƒãƒ³ãƒ‰
|ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œã‚Šç›´ã—ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†…ã«ç”Ÿã˜ãŸç©ºé ˜åŸŸã‚’è§£æ¶ˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’REINDEXã¨ã„ã†ã€‚

|ã‚«ãƒ¼ã‚½ãƒ«ã¨ã¯
|ã‚«ãƒ¼ã‚½ãƒ«ã¨ã¯ã€SQLã§å–å¾—ã—ãŸè¤‡æ•°è¡Œã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€Œ1è¡Œãšã¤é †ç•ªã«å‡¦ç†ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€ã§ã™ã€‚å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã¨ãã«ã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã‚ˆãã€åˆ¶å¾¡ã—ãªãŒã‚‰å‡¦ç†ã§ãã¾ã™ã€‚ +
**ğŸ§  ã‚«ãƒ¼ã‚½ãƒ«ã®åŸºæœ¬æ¦‚å¿µ** +
ã‚«ãƒ¼ã‚½ãƒ«ï¼ˆcursorï¼‰ã¯ã€SELECTæ–‡ã®çµæœã‚»ãƒƒãƒˆã«å¯¾ã—ã¦â€œä»Šã©ã®è¡Œã‚’è¦‹ã¦ã„ã‚‹ã‹â€ã‚’ç¤ºã™ç›®å°ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ æœ¬ã‚’èª­ã‚€ã¨ãã®ã€Œã—ãŠã‚Šã€ã®ã‚ˆã†ã«ã€ãƒ‡ãƒ¼ã‚¿ã®ä¸­ã‚’é †ç•ªã«ç§»å‹•ã—ãªãŒã‚‰å‡¦ç†ã—ã¾ã™ã€‚

|ã‚«ãƒ¼ã‚½ãƒ«ä½œæˆã‚³ãƒãƒ³ãƒ‰
|ã‚«ãƒ¼ã‚½ãƒ«ã‚’ä½œæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯DECLARE CURSORã§ã™ã€‚ +
æ›¸å¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +
DECLARE ã‚«ãƒ¼ã‚½ãƒ«å [ã‚ªãƒ—ã‚·ãƒ§ãƒ³1] CURSOR [ã‚ªãƒ—ã‚·ãƒ§ãƒ³2] FOR ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™å•ã„åˆã‚ã›; +
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‘ +
image:ã‚«ãƒ¼ã‚½ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‘.jpg[]
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼’ +
image:ã‚«ãƒ¼ã‚½ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼’.jpg[]

|psql -cã‚ªãƒ—ã‚·ãƒ§ãƒ³
|psqlã‚³ãƒãƒ³ãƒ‰ã®-cã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ç›´æ¥SQLæ–‡ã‚„ãƒ¡ã‚¿ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚ +
-cã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€psqlã‚’èµ·å‹•ã—ã¦å¯¾è©±å‹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ãªãã€æŒ‡å®šã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ +
ä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚ +
psql -U ãƒ¦ãƒ¼ã‚¶ãƒ¼å -d ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å -c "SELECT * FROM ãƒ†ãƒ¼ãƒ–ãƒ«å" +
ã“ã®ä¾‹ã§ã¯ã€æŒ‡å®šã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã§psqlã«æ¥ç¶šã—ã€SELECTæ–‡ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚ +
ã¡ãªã¿ã«ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã€‚ +
psql -U ãƒ¦ãƒ¼ã‚¶ãƒ¼å  -c "SELECT * FROM ãƒ†ãƒ¼ãƒ–ãƒ«å" ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å +

|ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åœæ­¢
|ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åœæ­¢ã™ã‚‹ã«ã¯ã€pg_ctlã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ +
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ [red]#PostgreSQLã®ç®¡ç†ãƒ¦ãƒ¼ã‚¶# ãŒPostgreSQLã®ç¨¼åƒã™ã‚‹ãƒ›ã‚¹ãƒˆä¸Šã§è¡Œã„ã¾ã™ã€‚rootãƒ¦ãƒ¼ã‚¶ã‚„ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ã¯å®Ÿè¡Œã§ãã¾ã›ã‚“ã€‚

|PostgreSQLã®æ­£è¦è¡¨ç¾
|PostgreSQLã«ã¯ã€3ã¤ã®æ­£è¦è¡¨ç¾æ©Ÿèƒ½ãŒå­˜åœ¨ã™ã‚‹ã€‚ +
ä¸»ãªæ©Ÿèƒ½ã¯ã€LIKEæ¼”ç®—å­ã€SIMILAR TOæ¼”ç®—å­ã€POSIXæ­£è¦è¡¨ç¾ã®3ã¤ã§ã™ã€‚ +
**LIKEæ¼”ç®—å­** +
æ–‡å­—åˆ—ã€Œå…¨ä½“ã€ã«å¯¾ã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†æ¼”ç®—å­ã§ã™ã€‚ +
ä¸»ã«WHEREå¥ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ +
æ›¸å¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +

ãƒ»å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹å ´åˆ +
åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å LIKE 'ãƒ‘ã‚¿ãƒ¼ãƒ³' +
ãƒ»å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„å ´åˆ +
åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å ILIKE 'ãƒ‘ã‚¿ãƒ¼ãƒ³' +

æ¡ä»¶ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä½¿ç”¨ã§ãã‚‹ãƒ¡ã‚¿æ–‡å­—(é€šå¸¸ã®æ–‡å­—ã¨ã¯åˆ¥ã®ç‰¹åˆ¥ãªæ„å‘³ã‚’æŒã¤æ–‡å­—)ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +
%ï¼šä»»æ„ã®æ–‡å­—åˆ—ã‚’è¡¨ã™ +
_ï¼šä»»æ„ã®1æ–‡å­—ã‚’è¡¨ã™ +
\ï¼šç›´å¾Œã«è¨˜è¼‰ã—ãŸæ–‡å­—ã‚’ãƒ¡ã‚¿æ–‡å­—ã¨ã—ã¦èªè­˜ã—ãªã„ +

[å®Ÿè¡Œä¾‹] +
image:æ­£è¦è¡¨ç¾_LIKE.jpg[]

**SIMILAR TOæ¼”ç®—å­** +
æ–‡å­—åˆ—ã€Œå…¨ä½“ã€ã«å¯¾ã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†æ¼”ç®—å­ã§ã‚ã‚Šã€æ­£è¦è¡¨ç¾ã‚’åˆ¤å®šã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ +
ä¸»ã«WHEREå¥ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ +
æ›¸å¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +

åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å SIMILAR TO 'ãƒ‘ã‚¿ãƒ¼ãƒ³'

æ¡ä»¶ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä½¿ç”¨ã§ãã‚‹ãƒ¡ã‚¿æ–‡å­—ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

%ï¼šä»»æ„ã®æ–‡å­—åˆ—ã‚’è¡¨ã™  +
_ï¼šä»»æ„ã®1æ–‡å­—ã‚’è¡¨ã™  +
\ï¼šç›´å¾Œã«è¨˜è¼‰ã—ãŸæ–‡å­—ã‚’ãƒ¡ã‚¿æ–‡å­—ã¨ã—ã¦èªè­˜ã—ãªã„ +
ï½œï¼šå·¦å³ã®æ¡ä»¶ã®ã†ã¡ã©ã¡ã‚‰ã‹ã‚’è¡¨ã™ +
*ï¼šç›´å‰ã®é …ç›®ã«å¯¾ã—ã€0å›ä»¥ä¸Šã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã™ +
+ï¼šç›´å‰ã®é …ç›®ã«å¯¾ã—ã€1å›ä»¥ä¸Šã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã™ +
?ï¼šç›´å‰ã®é …ç›®ã«å¯¾ã—ã€0å›ã¾ãŸã¯1å›ã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã™ +
{m}ï¼šç›´å‰ã®é …ç›®ã«å¯¾ã—ã€må›ã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã™ +
{m,}ï¼šç›´å‰ã®é …ç›®ã«å¯¾ã—ã€må›ä»¥ä¸Šã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã™ +
{m,n}ï¼šç›´å‰ã®é …ç›®ã«å¯¾ã—ã€må›ã‹ã‚‰nå›ã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã™ +
()ï¼š()ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã‚’è¡¨ã™ +
[å®Ÿè¡Œä¾‹] +
image:æ­£è¦è¡¨ç¾_SIMILAR TO.jpg[]

**POSIXæ­£è¦è¡¨ç¾** +
æ–‡å­—åˆ—ã®ã€Œä¸€éƒ¨ã€ã«å¯¾ã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†æ¼”ç®—å­ã§ã‚ã‚Šã€æ­£è¦è¡¨ç¾ã‚’åˆ¤å®šã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ +
ä¸»ã«WHEREå¥ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ +
æ›¸å¼ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +

ãƒ»å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹å ´åˆ(ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€è‡´ã™ã‚‹ã‹ã©ã†ã‹) +
åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å ~ 'ãƒ‘ã‚¿ãƒ¼ãƒ³'

ãƒ»å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„å ´åˆ(ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€è‡´ã™ã‚‹ã‹ã©ã†ã‹) +
åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å ~* 'ãƒ‘ã‚¿ãƒ¼ãƒ³'

ãƒ»å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã™ã‚‹å ´åˆ(ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€è‡´ã—ãªã„ã‹ã©ã†ã‹) +
åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å !~ 'ãƒ‘ã‚¿ãƒ¼ãƒ³'

ãƒ»å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„å ´åˆ(ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€è‡´ã—ãªã„ã‹ã©ã†ã‹) +
åˆ¤å®šå¯¾è±¡ã®ã‚«ãƒ©ãƒ å !~* 'ãƒ‘ã‚¿ãƒ¼ãƒ³'

åŒºåˆ¥ã™ã‚‹ã‹ã¤ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€è‡´ã™ã‚‹çŠ¶æ…‹ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€'~'ã®ã¿ã€‚ +
ãã“ã‹ã‚‰å¦å®šãªã©ãŒå…¥ã‚‹ã¨ã„ã‚ã„ã‚ãã£ã¤ã„ã¦ã„ãã€‚

[å®Ÿè¡Œä¾‹] +
image:æ­£è¦è¡¨ç¾_POSIX.jpg[]

|listen_addressesã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿'*'ã‚’è¨­å®šã™ã‚‹ã¨
|'*'ã‚’æŒ‡å®šã—ãŸå ´åˆã¯ã€ã™ã¹ã¦ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§æ¥ç¶šã‚’å¾…ã¡å—ã‘ã¾ã™ã€‚ +
ã¡ãªã¿ã«ã€è‡ªèº«ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’ç¤ºã™ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã—ãŸå ´åˆã€åŒä¸€ãƒã‚·ãƒ³ã‹ã‚‰ã®æ¥ç¶šä»¥å¤–ã¯å—ã‘ä»˜ã‘ã¾ã›ã‚“ã€‚

|VACUUMã¨VACUUM FULLå®Ÿè¡Œæ™‚ã®OSã®å æœ‰é ˜åŸŸã®å¤‰åŒ–
|VACUUMã‚³ãƒãƒ³ãƒ‰ã¯OSã®å æœ‰é ˜åŸŸã‚’ä¿æŒã—ãŸã¾ã¾å®Ÿè¡Œã§ãã‚‹ãŒã€VACUUM FULLã¯å®Ÿè¡Œæ™‚ã«OSã®å æœ‰é ˜åŸŸã‚’è¿”å´ã™ã‚‹

|postgreSQLã®é–¢æ•°ã«ãŠã‘ã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰
|PostgreSQLã«ãŠã„ã¦é–¢æ•°ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¯å¯èƒ½ã€‚ã¾ã£ãŸãåŒã˜é–¢æ•°ã®å ´åˆã¯æ–°ã—ã„ã»ã†ã«ç½®ãæ›ã‚ã‚‹ã€‚

|é–¢æ•°ã®å¼•æ•°ãŒNULLã®æ™‚ã®æŒ™å‹•ã®è¨­å®š
|ãƒ»CALLED ON NULL INPUT(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ) +
å¼•æ•°ã®ä¸€éƒ¨ã«NULLãŒå«ã¾ã‚Œã¦ã„ã¦ã‚‚é–¢æ•°ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚ +

ãƒ»RETURNS NULL ON NULL INPUTã‚‚ã—ãã¯STRICT +
å¼•æ•°ã®ä¸€éƒ¨ã«NULLãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€é–¢æ•°ã®å‡¦ç†ã‚’è¡Œã‚ãšã«NULLã‚’è¿”ã—ã¾ã™ã€‚ +
(ä¾‹) +
CREATE OR REPLACE FUNCTION sample_func(TEXT) RETURNS SETOF INTEGER AS \$$ +
SELECT id FROM sample WHERE staff = $1 ORDER BY id LIMIT 2;  +
$$ LANGUAGE SQL STRICT;

|æ—¥æ™‚ã‹ã‚‰æŒ‡å®šã—ãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã®ã¿ã‚’å–å¾—ã™ã‚‹
|æ—¥æ™‚ã‹ã‚‰æŒ‡å®šã—ãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ã®ã¿ã‚’å–å¾—ã™ã‚‹éš›ã¯extract()é–¢æ•°ã€ã¾ãŸã¯date_part()é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ +
æ›¸å¼ã¯ä»¥ä¸‹ã®é€šã‚Š +

extract(ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ from ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å€¤) +
date_part('ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰', ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å€¤)

extractã®å ´åˆã¯'from'ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã€ +
date_apartã®å ´åˆã¯ç¬¬ä¸€å¼•æ•°ã«''(ã‚¢ãƒã‚¹ãƒˆãƒ­ãƒ•ã‚£ãƒ¼)ãŒä»˜ãã“ã¨ã«æ³¨æ„

|INTERSECTæ–‡
|INTERSECTã¯è¨€ã†ãŸã‚‰ANDæ¼”ç®—ã€‚ALLã‚’ã¤ã‘ãŸã‚‰é‡è¤‡ã‚’è¨±å¯ã™ã‚‹ã€‚ +
ã¡ãªã¿ã«ORæ¼”ç®—ã¯UNION

|postgreSQLã®è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ
|postgreSQLã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒONã«ãªã£ã¦ã„ã‚‹ã€‚è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹ã«ã™ã‚‹ã«ã¯ã€BEGINã‚„START TRANSACTIONã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ +
ã“ã†ã—ã¦æ˜ç¤ºçš„ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹ã¨ã€commitã‚„abortã€rollbackã§æ˜ç¤ºçš„ã«é–‹å§‹ã—ãŸãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒçµ‚äº†ã™ã‚‹ã¾ã§ã¯è‡ªå‹•commitãŒç„¡åŠ¹ã«ãªã‚‹ã€‚ +
ã¡ãªã¿ã«ã€postgreSQLã¯ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹ã‚’æ›¸ã„ã¦ã„ãªãã¦ã‚‚abortã‚„rollbackã®è¨˜è¿°ãŒã§ãã‚‹ã€‚ ã“ã®å ´åˆã“ã®abortã‚„rollbackã¯ä½•ã®æ„å‘³ã‚‚ãªã•ãªã„ã€‚ï¼ˆè‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãŒæœ‰åŠ¹ãªã®ã§ã€SQLæ–‡ãŒå®Ÿè¡Œã•ã‚ŒãŸæ™‚ç‚¹ã§å‡¦ç†ãŒç¢ºå®šã™ã‚‹ï¼‰

|ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã¨PostgreSQLã®åœæ­¢
|ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã€ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã¨ã‚‚ã«ã€PostgreSQLã‚’åœæ­¢ã•ã›ã¦è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ +
ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã«äº’æ›æ€§ãŒç„¡ããªã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ +
ã¾ãŸã€è¨­å®šæ©Ÿèƒ½ãªã©ã®å¤§ããªæ©Ÿèƒ½ã«å¯¾ã™ã‚‹å¤‰æ›´ã¯ã€ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ã¯è¡Œã‚ã‚Œãšã€ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§è¡Œã‚ã‚Œã¾ã™ã€‚

|DIRTY READ, +
FUZZY READ, +
PHANTOM READ
|ãƒ»DIRTY READ(ãƒ€ãƒ¼ãƒ†ã‚£ãƒªãƒ¼ãƒ‰) +
ä»–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å¤‰æ›´ã•ã‚ŒãŸã€ã‚³ãƒŸãƒƒãƒˆå‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã—ã¾ã†ç¾è±¡ã§ã™ã€‚ +
[red]#ä»–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ã®ã‚³ãƒŸãƒƒãƒˆå‰ã®UPDATEã‚’èª­ã¿è¾¼ã‚“ã§ã—ã¾ã†ã®ãŒDIRTY READã€‚#

[å®Ÿè¡Œä¾‹]ã€€â€»PostgreSQLã§ã¯READ UNCOMMITTEDã®æŒ™å‹•ã‚’å–ã‚‰ãªã„ãŸã‚ã€å®Ÿéš›ã¯èµ·ã“ã‚Šã¾ã›ã‚“ã€‚
image:DIrty Read.jpg[]

ãƒ»FUZZY READ(ãƒ•ã‚¡ã‚¸ãƒ¼ãƒªãƒ¼ãƒ‰ãƒ»åå¾©ä¸èƒ½èª­ã¿å–ã‚Š) +
ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§è¤‡æ•°å›èª­ã¿è¾¼ã‚“ã å ´åˆã«ã€ä»–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›´ãƒ»å‰Šé™¤ãŒã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦å–å¾—ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿å†…å®¹ãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ç¾è±¡ã§ã™ã€‚ +
[red]#ä»–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ã®ã‚³ãƒŸãƒƒãƒˆå¾Œã®UPDATEã¨DELETEã‚’èª­ã¿è¾¼ã‚“ã§ã—ã¾ã†ã®ãŒFUZZY READã€‚#

[å®Ÿè¡Œä¾‹];
image:Fuzzy Read.jpg[]

ãƒ»PHANTOM READ(ãƒ•ã‚¡ãƒ³ãƒˆãƒ ãƒªãƒ¼ãƒ‰) +
ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§è¤‡æ•°å›èª­ã¿è¾¼ã‚“ã å ´åˆã«ã€ä»–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥ãŒã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦ä»¥å‰ã¯å–å¾—ã•ã‚Œãªã‹ã£ãŸãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã•ã‚Œã¦ã—ã¾ã†ç¾è±¡ã§ã™ã€‚ +
[red]#ä»–ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§ã®ã‚³ãƒŸãƒƒãƒˆå¾Œã®INSERTã‚’èª­ã¿è¾¼ã‚“ã§ã—ã¾ã†ã®ãŒPHANTOM READã€‚#

[å®Ÿè¡Œä¾‹]/
image:Phantom Read.jpg[]


|ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®åˆ†é›¢ãƒ¬ãƒ™ãƒ«
|image:ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«.jpg[]

|SETã‚³ãƒãƒ³ãƒ‰ã¨pg_ctr restart
|SETã‚³ãƒãƒ³ãƒ‰ã¯ã€å®Ÿè¡Œæ™‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚ +
SETã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã—ãŸè¨­å®šå€¤ã¯ã€SESSIONã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³(PostgreSQLã‚µãƒ¼ãƒã¸ã®æ¥ç¶š)å†…ã€LOCALã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿ã§æœ‰åŠ¹ã¨ãªã‚Šã¾ã™ã€‚ +
pg_ctl restartã‚³ãƒãƒ³ãƒ‰ã¯PostgreSQLã‚’å†èµ·å‹•ã™ã‚‹ãŸã‚ã€SETã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã•ã‚ŒãŸå€¤ã¯åæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚

|GENERATED { ALWAYS \| BY DEFAULT } AS IDENTITY
|ALWAYSã®å ´åˆã¯ã€INSERTã®æ™‚å€¤ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ +
BY DEFAULTã®å ´åˆã¯æ˜ç¤ºçš„ã«æŒ‡å®šã—ãŸå€¤ãŒæ ¼ç´ã•ã‚Œã‚‹ +
ã¡ãªã¿ã«é€£ç•ªã®é–‹å§‹ç•ªå·ã¯ 1 +

[\å®Ÿè¡Œä¾‹]
image:GENERATED { ALWAYS ã¾ãŸã¯ BY DEFAULT } AS IDENTITY.jpg[]

ã¾ãŸã€BY DEFAULTã®å ´åˆã¯updateã§è©²å½“ã‚«ãƒ©ãƒ ã®å€¤ã‚’å¤‰æ›´å¯èƒ½ã ãŒã€ +
ALWAYSã®å ´åˆã¯updateã§è©²å½“ã‚«ãƒ©ãƒ ã®å€¤ã‚’å¤‰æ›´ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚ +
[ã‚¨ãƒ©ãƒ¼æ–‡] +
ERROR:  column "i" can only be updated to DEFAULT +
DETAIL:  Column "i" is an identity column defined as GENERATED ALWAYS.

|ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åœæ­¢
|pg_dumpã‚„pg_dumpallã‚’ä½¿ã£ãŸè«–ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åœæ­¢ã•ã›ã‚‹å¿…è¦ã¯ãªã„ã€‚ +
ã¾ãŸã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒãŒä»–ãƒ¦ãƒ¼ã‚¶ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¦¨ã’ã‚‹ã“ã¨ã¯ãªã„ã€‚ +
ç‰©ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åœæ­¢ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚‹ã€‚ +
ã¾ãŸã€ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒãŒä»–ãƒ¦ãƒ¼ã‚¶ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã‚’å¦¨ã’ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚

|ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¨ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
|nextval()é–¢æ•°ã§ä¸€åº¦é€²ã‚ã‚‰ã‚ŒãŸã‚·ãƒ¼ã‚±ãƒ³ã‚¹å€¤ã¯ã€ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’è¡Œã£ã¦ã‚‚å…ƒã«æˆ»ã‚Šã¾ã›ã‚“ã€‚ +
ã‚ã€ã‚ã¨ã¡ãªã¿ã«ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¯ãƒã‚¤ãƒŠã‚¹å€¤ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã¾ãŸã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¨­å®šã™ã‚‹å¢—æ¸›å€¤ã«ã¯ãƒã‚¤ãƒŠã‚¹å€¤ã®æŒ‡å®šãŒå¯èƒ½ã§ã™ã€‚å¢—æ¸›å€¤ã‚’ãƒã‚¤ãƒŠã‚¹å€¤ã«ã—ãŸå ´åˆã¯ã€æŒ‡å®šã—ãŸæ•°ãšã¤æ¸›ã‚‰ã—ãªãŒã‚‰é€£ç•ªã‚’ä½œæˆã—ã¾ã™ã€‚

|JOINæ™‚ã®NATURALã¨USINGã«ã¤ã„ã¦
|NATURALã§ã¯å…±é€šã®ã‚«ãƒ©ãƒ ãŒè‡ªå‹•çš„ã«å·¦ç«¯ã«æ¥ã‚‹ï¼ˆçµåˆã‚­ãƒ¼ã¨ãªã‚‹ï¼‰ +
USINGã§ã¯æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ãŒå·¦ç«¯ã«æ¥ã‚‹ï¼ˆçµåˆã‚­ãƒ¼ã¨ãªã‚‹ï¼‰ +

|timestampå‹ã¨dateå‹ã®ä½¿ã„åˆ†ã‘
|timestampå‹ã¯ã€Œæ—¥ä»˜ï¼‹æ™‚åˆ»ã€ã€dateå‹ã¯ã€Œæ—¥ä»˜ã®ã¿ã€ã€‚æ™‚åˆ»ãŒå¿…è¦ã‹ã©ã†ã‹ã§ä½¿ã„åˆ†ã‘ã¾ã™ã€‚

|PostgreSQLã®ç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ±ºã¾ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°
|PostgreSQLã®ç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã¯ã€åˆæœŸåŒ–æ™‚ã« initdb ã‚’å®Ÿè¡Œã—ãŸOSãƒ¦ãƒ¼ã‚¶ãƒ¼åã§è‡ªå‹•çš„ã«æ±ºã¾ã‚Šã¾ã™ã€‚é€šå¸¸ã¯ postgres ã¨ã„ã†åå‰ã«ãªã‚Šã¾ã™ã€‚ +
ã‚ã¡ã‚ƒãã¡ã‚ƒä½™è«‡ã‚„ã‘ã©ã€åƒ•ã¯windowsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã§å…¥ã‚ŒãŸã‹ã‚‰ã€initdbãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã«ã‚ˆã£ã¦è‡ªå‹•ã§è¡Œã‚ã‚Œã¦ã‚‹ã€‚ã‚„ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã®è¨­å®šã§PostgreSQLã®ç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¨­å®šã—ãŸæ„Ÿã˜ã‚„ãª

|createuserã‚³ãƒãƒ³ãƒ‰ä¸€è¦§
|å¤§æ–‡å­—å°æ–‡å­—ã§æ©Ÿèƒ½ãŒåå¯¾ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€æ³¨æ„ã™ã‚‹ã“ã¨ã€‚ +
image:createuserã‚³ãƒãƒ³ãƒ‰.jpg[]

|ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¯¾ã™ã‚‹æ“ä½œ
|ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã¯åˆ¥ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã€‚ +
ãã®ãŸã‚ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å‰Šé™¤ã‚„åå‰ã®å¤‰æ›´ã‚’ã™ã‚‹å ´åˆã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«åãªã©ã¯æŒ‡å®šã™ã‚‹å¿…è¦ã¯ãªãã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åã®ã¿ã§ã„ã„ã€‚

|JOINç³»ã§'ALL'ã¯æŒ‡å®šã§ãã‚‹?
|ã§ãã¾ã›ã‚“ã€‚JOINã¯ãã‚‚ãã‚‚ã€Œä¸€è‡´ã™ã‚‹ã™ã¹ã¦ã®çµ„ã¿åˆã‚ã›ã‚’è¿”ã™ã€ãŸã‚ã€é‡è¤‡ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å‡ºåŠ›ã•ã‚Œã‚‹ã®ã§ã™ã€‚ +
é€†ã«é‡è¤‡ã‚’ã¾ã¨ã‚ã‚‹ã¨ã‹ã®åˆ¶å¾¡ã‚‚JOINå˜ä½“ã§ã¯ã§ããªã„ã®ã§æ³¨æ„

|ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆã§ã—ã‹èµ·å‹•ã§ããªã„ã‚³ãƒãƒ³ãƒ‰ã€ãã†ã§ãªã„ã‚³ãƒãƒ³ãƒ‰
|ç‰©ç†æ“ä½œç³»ï¼ˆinitdb, pg_ctlãªã©ï¼‰ï¼ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š +
è«–ç†æ“ä½œç³»ï¼ˆpg_dump, psqlãªã©ï¼‰ï¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚‚å¯èƒ½ +

PostgreSQLã¯ã€Œã‚µãƒ¼ãƒå‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãªã®ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã¯SQLã‚’é€šã˜ã¦è«–ç†æ“ä½œã—ã‹ã§ãã¾ã›ã‚“ã€‚ +
pg_ctl ã‚„ initdb ã¯ã€Œç‰©ç†æ“ä½œï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ—ãƒ­ã‚»ã‚¹ï¼‰ã€ãªã®ã§ã€OSã®æ¨©é™ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ +

[cols="^.^1,^.^3,3", options="header"]
!===
!ã‚³ãƒãƒ³ãƒ‰ !å®Ÿè¡Œç’°å¢ƒ !ç”¨é€”ãƒ»è£œè¶³
!pg_ctl	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!ã‚µãƒ¼ãƒã®èµ·å‹•ãƒ»åœæ­¢ãƒ»å†èµ·å‹•ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹
!initdb	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!æ–°ã—ã„ã‚¯ãƒ©ã‚¹ã‚¿ã®åˆæœŸåŒ–ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ“ä½œ
!postgres	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!PostgreSQLã‚µãƒ¼ãƒæœ¬ä½“ã®èµ·å‹•ã€‚OSãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦å‹•ä½œ
!pg_resetwal	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!WALãƒ­ã‚°ã®ãƒªã‚»ãƒƒãƒˆã€‚ã‚¯ãƒ©ãƒƒã‚·ãƒ¥å¾©æ—§ç”¨
!pg_checksums	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!ãƒã‚§ãƒƒã‚¯ã‚µãƒ ã®æœ‰åŠ¹åŒ–ãƒ»æ¤œè¨¼ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
!pg_upgrade	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã®ã‚¯ãƒ©ã‚¹ã‚¿ç§»è¡Œã€‚æ—§ãƒ»æ–°ä¸¡æ–¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¢ã‚¯ã‚»ã‚¹
!pg_basebackup	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®šï¼ˆé€šå¸¸ï¼‰	!ç‰©ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€‚replicationæ¨©é™ãŒã‚ã‚Œã°ä¸€éƒ¨ãƒªãƒ¢ãƒ¼ãƒˆå¯èƒ½
!vacuumdb --analyze-in-stages	!ã‚µãƒ¼ãƒãƒ›ã‚¹ãƒˆé™å®š	!ç‰¹æ®Šã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®çµ±è¨ˆåé›†ã€‚ä¸€éƒ¨åˆ¶é™ã‚ã‚Š
!===

[cols="^.^1,^.^3,3", options="header"]
!===
!ã‚³ãƒãƒ³ãƒ‰ !ä»–ãƒ›ã‚¹ãƒˆã§ã‚‚å®Ÿè¡Œå¯èƒ½ !ç”¨é€”ãƒ»è£œè¶³
!pg_dump	!âœ…	!è«–ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€‚-hã§ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šå¯èƒ½
!pg_restore	!âœ…	!ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãƒªã‚¹ãƒˆã‚¢ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†
!psql	!âœ…	!SQLå®Ÿè¡Œãƒ»ãƒ¡ã‚¿ã‚³ãƒãƒ³ãƒ‰æ“ä½œã€‚ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šå¯èƒ½
!createdb, dropdb	!âœ…	!DBä½œæˆãƒ»å‰Šé™¤ã€‚ãƒªãƒ¢ãƒ¼ãƒˆã§ã‚‚OK
!vacuumdb	!âœ…	!é€šå¸¸ã®ãƒã‚­ãƒ¥ãƒ¼ãƒ å‡¦ç†ã€‚ãƒªãƒ¢ãƒ¼ãƒˆã§ã‚‚OK
!reindexdb, clusterdb	!âœ…	!ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†æ§‹ç¯‰ãƒ»ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã€‚ãƒªãƒ¢ãƒ¼ãƒˆã§ã‚‚OK
!pg_isready	!âœ…	!æ¥ç¶šç¢ºèªã€‚-hæŒ‡å®šã§ãƒªãƒ¢ãƒ¼ãƒˆç¢ºèªå¯èƒ½
!===

|ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã«ã¤ã„ã¦
|ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€PostgreSQLã‚µãƒ¼ãƒ(ãƒ—ãƒ­ã‚»ã‚¹ç¾¤ã‚„ã‚µãƒ¼ãƒ“ã‚¹)ã¨1å¯¾1ã§å¯¾å¿œã—ã¾ã™ã€‚ã§ã™ã‹ã‚‰ã€è¤‡æ•°ã®ã‚µãƒ¼ãƒã§1ã¤ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã‚’åˆ†æ•£ç®¡ç†ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ +
ãŸã ã—ã€PostgreSQLã‚µãƒ¼ãƒã¯1å°ã®ãƒã‚·ãƒ³ã«è¤‡æ•°ã‚’åŒæ™‚ã«ç¨¼åƒã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€1å°ã®ãƒã‚·ãƒ³ã§è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã‚’é‹ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã€‚

|create~dropã§ãªã„ã‚‚ã®
|[cols="^.^1,^.^1,^.^1,^.^1", options="header"]
!===
!å¯¾è±¡	!ä½œæˆæ§‹æ–‡	!å‰Šé™¤æ§‹æ–‡	!ç”¨é€”ãƒ»è£œè¶³
!ã‚«ãƒ¼ã‚½ãƒ«	!DECLARE cursor_name CURSOR FOR ...	!CLOSE cursor_name ã¾ãŸã¯ DEALLOCATE cursor_name	 !SELECTçµæœã‚’é€æ¬¡å‡¦ç†ã™ã‚‹ãŸã‚ã®ä¸€æ™‚çš„ãªãƒã‚¤ãƒ³ã‚¿
!ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ	!PREPARE stmt_name AS ...	!DEALLOCATE stmt_name	!SQLæ–‡ã®äº‹å‰å®šç¾©ã€‚é«˜é€ŸåŒ–ã‚„å†åˆ©ç”¨ã«ä½¿ã†
!åŒ¿åãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ	!EXECUTE 'SQLæ–‡'	!è‡ªå‹•çš„ã«è§£æ”¾ï¼ˆæ˜ç¤ºçš„ãª DEALLOCATE ã¯ä¸è¦ï¼‰	!ä¸€æ™‚çš„ãªå®Ÿè¡Œã€‚åå‰ã‚’ä»˜ã‘ãªã„å ´åˆã¯è‡ªå‹•ç®¡ç†
!ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€æ‹¬è§£æ”¾	!DISCARD ALL	!DEALLOCATE ç›¸å½“ã®ä¸€æ‹¬ç ´æ£„	!TEMPãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»PREPAREæ–‡ãƒ»ã‚«ãƒ¼ã‚½ãƒ«ãªã©ã‚’ã¾ã¨ã‚ã¦è§£æ”¾
!===

|ãƒˆãƒªã‚¬ãƒ¼ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æ±ºå®šã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ã€æŒ‡å®šã§ããªã„ã‚‚ã®
|ãƒˆãƒªã‚¬ãƒ¼ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ›´æ–°å‡¦ç†ãŒå®Ÿè¡Œã•ã‚ŒãŸã¨ãã«ã®ã¿ã€ç™ºç«ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ +
ãã®ãŸã‚ã€INSERTã€UPDATEã€DELETEã€TRUNCATEã¯ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ã—ã¦è¨­å®šã§ãã‚‹ãŒã€SELECTã¯ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ã—ã¦è¨­å®šã§ããªã„

|ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ
|ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ROLLBACKã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¾ã§å…¨ã¦ã®SQLã¯ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã®å‡¦ç†ã¯å–ã‚Šæ¶ˆã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ACIDç‰¹æ€§ã®ã†ã¡ã€Atomicity(åŸå­æ€§)ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚

[ä¾‹]/
image:ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã®ã‚¨ãƒ©ãƒ¼.jpg[]

|CREATE FUNCTIONã‚„CREATE PROCEDUREãªã©ã§è¦‹ã‚‰ã‚Œã‚‹"$$"ã«ã¤ã„ã¦
|(ä¾‹) +
CREATE PROCEDURE funcX(VARCHAR) AS $$ +
INSERT INTO customer_log VALUES($1, CURRENT_DATE, 'shopA'); +
$$ LANGUAGE SQL; +

\$$ ... $$ ã¯ã€Œã“ã“ã‹ã‚‰ã“ã“ã¾ã§ãŒã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§ã™ã‚ˆã€ã¨ã„ã†å˜ãªã‚‹åŒºåˆ‡ã‚Šè¨˜å·ã§ã‚ã‚‹ã€‚ãã®ä¸­ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ INSERT INTO ... ãŒã€Œæ‰‹ç¶šãæœ¬ä½“ã€ã¨ãªã‚‹ã€‚

|é–¢æ•°ã®æˆ»ã‚Šå€¤ãŒå˜æ•°ã‹è¤‡æ•°åŒ–ã‚’è¦‹åˆ†ã‘ã‚‹
|RETURNSã®å¾Œã«SETOFãŒä»˜ã„ã¦ã„ã‚Œã°è¤‡æ•°ã€‚ ã¤ã„ã¦ã„ãªã‘ã‚Œã°å˜æ•°

|FUNCTIONã¨PROCEDUREã®é•ã„
|FUNCTIONã¯å¿…ãšæˆ»ã‚Šå€¤ã‚’"RETURNS"ã§æ˜è¨˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ +
void ã®å ´åˆã¯"RETURNS void"ã€‚ +
PROCEDUREã¯æˆ»ã‚Šå€¤ãŒç„¡ã„ã“ã¨ãŒç¢ºå®šã—ã¦ã„ã‚‹ã€‚ void ã®ã¿ã€‚ +
ç¢ºå®šã—ã¦ã„ã‚‹ã®ã§RETURNSãªã©ã¯æ›¸ã‹ãªãã¦ã„ã„ã€‚

|SQLã§ã®ã‚¯ãƒ­ã‚¹çµåˆ
|SQL ã§ JOIN ã‚’æ›¸ã‹ãšã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ä¸¦ã¹ãŸå ´åˆã¯ã€æš—é»™çš„ã« ã‚¯ãƒ­ã‚¹çµåˆï¼ˆç›´ç©ï¼‰ ã«ãªã‚Šã¾ã™ã€‚

ğŸ” å…·ä½“çš„ã«ã„ã†ã¨ +

SELECT * 
FROM shopA_shoes, shopB_shoes; +
JOIN æ¡ä»¶ãŒç„¡ã„ã®ã§ã€ä¸¡ãƒ†ãƒ¼ãƒ–ãƒ«ã® å…¨è¡Œã®çµ„ã¿åˆã‚ã› ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

ã¤ã¾ã‚Šã€shopA_shoes ã®è¡Œæ•°ã‚’ nAã€shopB_shoes ã®è¡Œæ•°ã‚’ nB ã¨ã™ã‚‹ã¨ã€çµæœã¯ nA Ã— nB è¡Œã€‚

ã“ã‚Œã¯ CROSS JOIN ã¨åŒã˜æ„å‘³ã§ã™ã€‚

âœ… ä¾‹
shopA_shoes ã« 5 è¡Œ

shopB_shoes ã« 8 è¡Œ

ã®å ´åˆã€çµæœã¯ 5 Ã— 8 = 40 è¡Œã«ãªã‚Šã¾ã™ã€‚

âœ¨ è¨­è¨ˆç¾çš„ãƒã‚¤ãƒ³ãƒˆ
OSS-DB è©¦é¨“ã‚„å®Ÿå‹™ã§ã¯ã€Œã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã¯å¤ã„æ›¸ãæ–¹ã€ã¨ã•ã‚Œã€æ„å›³ãŒä¸æ˜ç­ã«ãªã‚ŠãŒã¡ã§ã™ã€‚

æ˜ç¤ºçš„ã«æ›¸ããªã‚‰ã“ã†ã™ã‚‹æ–¹ãŒå®‰å…¨ã§ç¾ã—ã„ã§ã™ï¼š


SELECT * 
FROM shopA_shoes
CROSS JOIN shopB_shoes;

|PostgreSQLé…å¸ƒæ™‚ã®ç„¡ä¿è¨¼è¨˜è¼‰ã«ã¤ã„ã¦
|Postgreã‚’é…å¸ƒã™ã‚‹éš›ã¯ã€ç„¡ä¿è¨¼ã§ã‚ã‚‹ã“ã¨ã‚’è¨˜è¼‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ +
çµè«–ï¼šPostgreSQLãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã«ãŠã‘ã‚‹ã€Œç„¡ä¿è¨¼ã€ã¨ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒâ€œç¾çŠ¶ã®ã¾ã¾â€æä¾›ã•ã‚Œã€é–‹ç™ºè€…ã‚„é…å¸ƒè€…ãŒãã®å“è³ªãƒ»æ€§èƒ½ãƒ»é©åˆæ€§ãƒ»æå®³è³ å„Ÿè²¬ä»»ãªã©ã‚’ä¸€åˆ‡ä¿è¨¼ã—ãªã„ã“ã¨ã‚’æ˜è¨˜ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ ä»¥ä¸‹èª¬æ˜ã€‚

ğŸ” ç„¡ä¿è¨¼ã§ã‚ã‚‹ã“ã¨ã®å…·ä½“çš„ãªæ„å‘³ +
PostgreSQLã¯ã€ŒPostgreSQL Licenseã€ï¼ˆBSDç³»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸€ç¨®ï¼‰ã‚’æ¡ç”¨ã—ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªå…è²¬äº‹é …ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

å‹•ä½œä¿è¨¼ãªã— ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã™ã‚‹ã“ã¨ã¯ä¿è¨¼ã•ã‚Œãªã„ã€‚ 

å“è³ªä¿è¨¼ãªã— ãƒã‚°ãŒãªã„ã€å®Œå…¨ã§ã‚ã‚‹ã€ç‰¹å®šã®ç›®çš„ã«é©åˆã™ã‚‹ã€ã¨ã„ã£ãŸä¿è¨¼ã¯ãªã„ã€‚

æå®³è³ å„Ÿè²¬ä»»ãªã— ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ä½¿ç”¨ã‚„ä¸å…·åˆã«ã‚ˆã£ã¦ç”Ÿã˜ãŸç›´æ¥çš„ãƒ»é–“æ¥çš„ãªæå®³ã«ã¤ã„ã¦ã€é–‹ç™ºè€…ã‚„é…å¸ƒè€…ã¯è²¬ä»»ã‚’è² ã‚ãªã„ã€‚

å•†ç”¨åˆ©ç”¨ã«ãŠã‘ã‚‹ä¿è¨¼ãªã— å•†ç”¨åˆ©ç”¨ã‚„æ¥­å‹™åˆ©ç”¨ã«ãŠã„ã¦ã‚‚ã€æ€§èƒ½ã‚„å®‰å…¨æ€§ã«ã¤ã„ã¦ä¿è¨¼ã•ã‚Œãªã„ã€‚

ğŸ§  èƒŒæ™¯
PostgreSQLã¯ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§ã‚ã‚Šã€èª°ã§ã‚‚è‡ªç”±ã«åˆ©ç”¨ãƒ»æ”¹å¤‰ãƒ»å†é…å¸ƒã§ãã¾ã™ã€‚

ãã®ä»£ã‚ã‚Šã«ã€ã€Œä¿è¨¼ã¯ä¸€åˆ‡ãªã„ã€ã“ã¨ã‚’æ˜è¨˜ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºè€…ã‚„é…å¸ƒè€…ãŒæ³•çš„è²¬ä»»ã‚’è² ã‚ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã®ã§ã™ã€‚

ã“ã‚Œã¯BSDç³»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã§ã‚ã‚Šã€MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãªã©ã‚‚åŒæ§˜ã®å…è²¬æ¡é …ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

ğŸ¨ ã¾ã¨ã‚
PostgreSQLã®ã€Œç„¡ä¿è¨¼ã€ã¨ã¯ã€

å‹•ä½œãƒ»å“è³ªãƒ»é©åˆæ€§ãƒ»æå®³è³ å„Ÿã®ä¸€åˆ‡ã‚’ä¿è¨¼ã—ãªã„ ã¨ã„ã†ã“ã¨ã‚’æ˜è¨˜ã™ã‚‹ã‚‚ã®ã§ã™ã€‚

ã¤ã¾ã‚Šã€åˆ©ç”¨è€…ã¯ã€Œç¾çŠ¶ã®ã¾ã¾ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’å—ã‘å–ã‚Šã€å•é¡ŒãŒã‚ã‚Œã°è‡ªå·±è²¬ä»»ã§å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

|SELECT COUNTã§NULLã‚’æ•°ãˆã‚‹ã‹
|COUNT(*) +
â†’ ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨è¡Œæ•°ã‚’è¿”ã—ã¾ã™ã€‚åˆ—ã®å€¤ãŒ NULL ã‹ã©ã†ã‹ã¯é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚ +
â†’ ã¤ã¾ã‚Šã€Œè¡ŒãŒå­˜åœ¨ã™ã‚‹ã€ã“ã¨è‡ªä½“ã‚’æ•°ãˆã‚‹ã®ã§ã€NULL ã‚‚ 1 è¡Œã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚

COUNT(column_name) +
â†’ æŒ‡å®šã—ãŸåˆ—ã® NULL ã§ãªã„å€¤ã ã‘ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚ +
â†’ ä¾‹ãˆã° COUNT(price) ãªã‚‰ã€price ãŒ NULL ã®è¡Œã¯é™¤å¤–ã•ã‚Œã¾ã™ã€‚ +

(ä¾‹)

sample ãƒ†ãƒ¼ãƒ–ãƒ« +
+----+--------+ +
\| id \| value  \| +
+----+--------+ +
\| 1  \| 'A'    \| +
\| 2  \| NULL   \| +
\| 3  \| 'B'    \| +
+----+--------+ +

SELECT COUNT(*) FROM sample;   -- çµæœ: 3 +
SELECT COUNT(value) FROM sample; -- çµæœ: 2

|ROLE ã¨ USER ã®é•ã„
|CREATE USER ã¯ CREATE ROLE ... LOGIN ã®ç³–è¡£æ§‹æ–‡ã§ã™ã€‚é•ã„ã¯ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³æ¨©é™ãŒä»˜ãã‹ã©ã†ã‹ã€ã ã‘ã§ã™ã€‚

ğŸ”‘ è©³ç´°ãªé•ã„
CREATE ROLE

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ NOLOGINï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸å¯ï¼‰ã€‚

æ¨©é™ã‚„æ‰€æœ‰è€…ã‚’ã¾ã¨ã‚ã‚‹ã€ŒæŠ½è±¡çš„ãªä¸»ä½“ã€ã¨ã—ã¦ä½œã‚‰ã‚Œã‚‹ã€‚

å¿…è¦ãªã‚‰ WITH LOGIN ã‚’ä»˜ã‘ã¦ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½ã«ã§ãã‚‹ã€‚

PostgreSQL 8.1 ä»¥é™ã§å°å…¥ã•ã‚ŒãŸã€ã‚ˆã‚Šä¸€èˆ¬çš„ãªã‚³ãƒãƒ³ãƒ‰ã€‚

CREATE USER

å†…éƒ¨çš„ã«ã¯ CREATE ROLE ... LOGIN ã¨åŒã˜ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ LOGIN æ¨©é™ãŒæœ‰åŠ¹ã€‚

ã¤ã¾ã‚Šã€Œãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ ROLEã€ã‚’ä½œã‚‹ãŸã‚ã®åˆ¥åã€‚

PostgreSQL ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ã€ŒCREATE USER ã¯ CREATE ROLE ã®åˆ¥åã€ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã‚‹

PostgreSQLã§ã¯å†…éƒ¨çš„ã«ã¯ã™ã¹ã¦ ROLE ã§çµ±ä¸€ã€‚

[red]#CREATE USER ã¯å˜ãªã‚‹ç³–è¡£æ§‹æ–‡ã§ã€LOGIN å±æ€§ä»˜ã ROLE ã‚’ä½œã‚‹ã ã‘#

|[red]#ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ä½¿ã£ãŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã‚¢#
|pg_dumpã§ã¯-fã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãªã„ã§ã€æ¨™æº–å‡ºåŠ›ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ä½¿ã£ãŸæ–¹æ³•ãŒã‚ˆãã¤ã‹ã‚ã‚Œã‚‹ã€‚ +
(ä¾‹) +
pg_dump mydb > backup.sql +
ã“ã‚Œã¯å®Ÿè³ªçš„ã«"pg_dump -f backup.sql mydb"ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã®ã¨åŒã˜ã€‚ +

æ¬¡ã«ãƒªã‚¹ãƒˆã‚¢ã«ã¤ã„ã¦æ›¸ãã€‚ +
ãƒªã‚¹ãƒˆã‚¢ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ãŸã„å ´åˆã¯ã€pg_restoreã§ã¯ãªãã€psqlã‚’ä½¿ç”¨ã™ã‚‹ã€‚ +
(ä¾‹) +
psql -d newdb < backup.sql

(ã¾ã¨ã‚)
ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ä½¿ã£ãŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ãƒªã‚¹ãƒˆã‚¢ +
pg_dump -Fp mydb > backup.sql +
psql -d newdb < backup.sql

|FROMå¥ã§å‰¯å•ã„åˆã‚ã›ã‚’ã™ã‚‹å ´åˆ
|FROMå¥ã§å‰¯å•ã„åˆã‚ã›ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€FROMå¥ã®å‰¯å•ã„åˆã‚ã›ã«å¯¾ã—ã¦åˆ¥åã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ +

(ä¾‹) +
SELECT sub.department, sub.count +
FROM ( +
    SELECT éƒ¨ç½² AS department, COUNT(*) AS count +
    FROM member +
    GROUP BY éƒ¨ç½² +
) AS sub; +

(...) AS sub ã®éƒ¨åˆ†ãŒå¿…é ˆã€‚ +
sub ã¯ä»»æ„ã®åå‰ã§ã‚ˆãã€ã“ã“ã§å®šç¾©ã—ãŸåå‰ã‚’å¤–å´ã®SELECTã§å‚ç…§ã—ã¾ã™ã€‚

|INHERITS(ç¶™æ‰¿)
|ã‚ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã—ãŸå ´åˆã€ç¶™æ‰¿ã¨ã„ã†æ©Ÿèƒ½ã‚’ç”¨ã„ã‚‹ã¨è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã®å®šç¾©ã‚‚å¼•ãç¶™ã„ã ãƒ†ãƒ¼ãƒ–ãƒ«(å­ãƒ†ãƒ¼ãƒ–ãƒ«)ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å­ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã«ãªã„å®šç¾©ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ã•ã‚‰ã«ã€å­ãƒ†ãƒ¼ãƒ–ãƒ«ã«å­˜åœ¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã®æ¤œç´¢ã‹ã‚‰å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ +

(ä¾‹)
image:INHERITS.jpg[] +
é‡è¦ãªã®ã¯ã€sample2ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹éš›ã«ã€ã‚«ãƒ©ãƒ ã®ä½œæˆã«ãŠã„ã¦telã‚«ãƒ©ãƒ ã®ä½œæˆã—ã‹ã—ã¦ã„ãªã„ã“ã¨ã€‚ +
INHERITSã‚’ä½¿ãˆã°è¦ªã®ã‚«ãƒ©ãƒ ã¯å¼•ãç¶™ã’ã‚‹ã®ã§ã€å­ã«ã®ã¿å®Ÿè£…ã—ãŸã„ã‚«ãƒ©ãƒ ã‚’ä½œæˆã™ã‚‹ã ã‘ã§ã„ã„ã€‚ +

|killã‚³ãƒãƒ³ãƒ‰åŒç­‰æ©Ÿèƒ½ä¸€è¦§
|ãƒ»TERM(pg_ctl stop -m smartã¨åŒã˜å‡¦ç†) +
å…¨ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã‚‹ã¾ã§å¾…ã£ã¦ã‹ã‚‰ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ã¾ã™ã€‚

ãƒ»INT(pg_ctl stop -m fastã¨åŒã˜å‡¦ç†) +
é«˜é€Ÿã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—ã€å®Ÿè¡Œä¸­ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®å‡¦ç†ãŒé–‹å§‹ã—ãŸæ™‚ã®çŠ¶æ…‹ã«æˆ»ã—ã¾ã™(ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¾ã™)ã€‚

ãƒ»QUIT(pg_ctl stop -m immediateã¨åŒã˜å‡¦ç†) +
å®Ÿè¡Œä¸­ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œå‰ã®çŠ¶æ…‹ã«æˆ»ã™ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã©ã®çµ‚äº†å‡¦ç†ã‚’è¡Œã‚ãšã«ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹è‡ªä½“ã‚’åœæ­¢ã—ã¾ã™ã€‚ã‚µãƒ¼ãƒã®ãƒ—ãƒ­ã‚»ã‚¹ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¦åœæ­¢ã—ãŸã®ã¨åŒã˜ãªã®ã§ã€æ¬¡å›èµ·å‹•æ™‚ã«å›å¾©å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã‚µãƒ¼ãƒã«è² è·ãŒã‹ã‹ã‚Šã¾ã™ã€‚

ãƒ»HUP(pg_ctl reloadã¨åŒã˜å‡¦ç†) +
è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã™ã€‚

|æƒ…å ±ã‚¹ã‚­ãƒ¼ãƒã¨ã‚·ã‚¹ãƒ†ãƒ ã‚«ã‚¿ãƒ­ã‚°
|ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã«é–¢ã™ã‚‹æƒ…å ±ã¯ã€ã€Œæƒ…å ±ã‚¹ã‚­ãƒ¼ãƒã€ã¨ã€Œã‚·ã‚¹ãƒ†ãƒ ã‚«ã‚¿ãƒ­ã‚°ã€ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãã‚Œãã‚Œã®ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

â– æƒ…å ±ã‚¹ã‚­ãƒ¼ãƒ
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹å®šç¾©æƒ…å ±ã‚’å«ã‚€ã‚¹ã‚­ãƒ¼ãƒ(ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å†…ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãªã©ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼ç´ã—ã¦ã„ã‚‹åå‰ç©ºé–“)ã§ã™ã€‚

ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +
ãƒ»ã‚¹ã‚­ãƒ¼ãƒã®åç§°ã¯ã€Œinformation_schemaã€ã§ã‚ã‚‹ +
ãƒ»SQLã®æ¨™æº–è¦æ ¼ã«å½“ã¦ã¯ã¾ã‚‹ã®ã§ã€ç§»æ¤æ€§ãŒé«˜ã„ +
ãƒ»ãƒ“ãƒ¥ãƒ¼(SQLæ–‡ã®SELECTçµæœã‚’åŸºã«ã—ã¦å®šç¾©ã™ã‚‹ä»®æƒ³ã®ãƒ†ãƒ¼ãƒ–ãƒ«)ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚°ãƒ«ãƒ¼ãƒ—ã§ã‚ã‚‹ +
ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã®ä½œæˆæ™‚ã«ä½œã‚‰ã‚ŒãŸã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ã«æ‰€æœ‰ã•ã‚Œã‚‹ +
ãƒ»å‚ç…§ã«ç‰¹åˆ¥ãªè¨­å®šã‚„æ¨©é™ã¯ä¸è¦ã§ã‚ã‚‹ +

ã€æƒ…å ±ã‚¹ã‚­ãƒ¼ãƒã®ä¸»ãªãƒ“ãƒ¥ãƒ¼ã€‘ +
ãƒ»tables  +
publicã‚¹ã‚­ãƒ¼ãƒ(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½œæˆã•ã‚Œã€ã‚¹ã‚­ãƒ¼ãƒæŒ‡å®šã‚’ã—ãªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼ç´ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒ)å†…ã‚’å«ã‚€ã€å…¨ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãƒ“ãƒ¥ãƒ¼ã®ä¸€è¦§ã‚’æ ¼ç´ã—ã¦ã„ã‚‹ã€‚
(å®Ÿè¡Œä¾‹)
image:information_schema.jpg[]

â– ã‚·ã‚¹ãƒ†ãƒ ã‚«ã‚¿ãƒ­ã‚°
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å†…éƒ¨æƒ…å ±ã‚’æ ¼ç´ã—ãŸPostgreSQLå›ºæœ‰ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™ã€‚

ç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ +
ãƒ»ã‚¹ã‚­ãƒ¼ãƒã®åç§°ã¯ã€Œpg_catalogã€ã§ã‚ã‚‹(æš—é»™çš„ã«å¿…ãšæ¤œç´¢ãƒ‘ã‚¹ã«å«ã¾ã‚Œã‚‹ãŸã‚ã€ã‚¹ã‚­ãƒ¼ãƒã®æŒ‡å®šã¯çœç•¥ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã€‚) +
ãƒ»æƒ…å ±ã‚¹ã‚­ãƒ¼ãƒã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ã‚’ç¢ºèªã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ +
ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ã®ç®¡ç†ã«é–¢ã™ã‚‹æƒ…å ±ã‚’å«ã‚€ +
ãƒ»SQLã®æ¨™æº–è¦æ ¼ã«ã¯å½“ã¦ã¯ã¾ã‚‰ãªã„ã®ã§ã€ç§»æ¤æ€§ãŒä½ã„ +

ã€PostgreSQLã®ä¸»ãªã‚·ã‚¹ãƒ†ãƒ ã‚«ã‚¿ãƒ­ã‚°ã€‘
image:system_catalog_list.jpg[]

(å®Ÿè¡Œä¾‹)
image:system_catalog.jpg[]

|ALTER SYSTEMã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦
|postgreSQLã®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã«ã¯postgre.confã‚’æ‰‹å‹•ã§ç›´æ¥ã„ã˜ã‚‹ã‹ã€ALTER SYSTEM ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†æ–¹æ³•ãŒã‚ã‚‹ã€‚ +
ã€Œpostgresql.auto.confã€ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³9.4ã§æ–°æ©Ÿèƒ½ã¨ã—ã¦è¿½åŠ ã•ã‚ŒãŸã€ALTER SYSTEMã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã£ã¦æ“ä½œã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ +
ALTER SYSTEMã‚³ãƒãƒ³ãƒ‰ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å€¤ã‚’è¨­å®šã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã€Œpostgresql.auto.confã€ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™ã€‚ã€Œpostgresql.auto.confã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯ã€ã€Œpostgresql.confã€ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿æ™‚ã«ä¸Šæ›¸ãã•ã‚Œã‚‹ãŸã‚ã€åŒã˜ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€Œpostgresql.auto.confã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚ +
ALTER SYSTEMã‚³ãƒãƒ³ãƒ‰ã¯æ¯”è¼ƒçš„æœ€è¿‘ã§ããŸã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹ã€‚ +
ALTER SYSTEMã‚³ãƒãƒ³ãƒ‰ãŒç”Ÿã¾ã‚ŒãŸèƒŒæ™¯ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã€‚ +

ğŸ¯ èƒŒæ™¯ã¨èª²é¡Œ +
å¾“æ¥ã®æ–¹æ³• PostgreSQL 9.3 ä»¥å‰ã¯ã€ã‚µãƒ¼ãƒå…¨ä½“ã®è¨­å®šã‚’å¤‰ãˆã‚‹ã«ã¯ postgresql.conf ã‚’ç›´æ¥ç·¨é›†ã™ã‚‹ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚

* OSãƒ¬ãƒ™ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†æ¨©é™ãŒå¿…è¦
* ç·¨é›†ãƒŸã‚¹ã§æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã¨èµ·å‹•ã§ããªããªã‚‹
* è‡ªå‹•åŒ–ã‚„ãƒ„ãƒ¼ãƒ«é€£æºãŒé›£ã—ã„

èª²é¡Œæ„Ÿ +
å¤§è¦æ¨¡é‹ç”¨ã‚„ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§ã¯ã€ŒSQLã‹ã‚‰ä¸€è²«ã—ã¦è¨­å®šã‚’å¤‰æ›´ã—ãŸã„ã€ã€Œç®¡ç†è€…ãŒãƒªãƒ¢ãƒ¼ãƒˆã§å®‰å…¨ã«æ“ä½œã—ãŸã„ã€ã¨ã„ã†ãƒ‹ãƒ¼ã‚ºãŒé«˜ã¾ã£ã¦ã„ã¾ã—ãŸã€‚

ğŸš€ ALTER SYSTEM å°å…¥ã®ç›®çš„ +
å®‰å…¨æ€§

* SQLæ–‡ã¨ã—ã¦æ§‹æ–‡ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ã§ postgresql.auto.conf ã«æ›¸ãè¾¼ã¾ã‚Œã‚‹ãŸã‚ã€èª¤ç·¨é›†ã®ãƒªã‚¹ã‚¯ãŒæ¸›ã‚‹ã€‚
* ä¸€è²«æ€§ DBAãŒSQLã ã‘ã§è¨­å®šå¤‰æ›´ã§ãã‚‹ã®ã§ã€æ¨©é™ç®¡ç†ã‚’DBå†…ã«é–‰ã˜è¾¼ã‚ã‚‰ã‚Œã‚‹ã€‚
* è‡ªå‹•åŒ– é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ç®¡ç†ãƒ„ãƒ¼ãƒ«ã‹ã‚‰ç›´æ¥SQLã§è¨­å®šå¤‰æ›´ã§ãã‚‹ã€‚ã‚¯ãƒ©ã‚¦ãƒ‰ã‚„ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã§ç‰¹ã«æœ‰åŠ¹ã€‚

ğŸ•°ï¸ æ­´å²çš„ã‚¿ã‚¤ãƒŸãƒ³ã‚° +
PostgreSQL 9.4 (2014å¹´12æœˆ) ã§è¿½åŠ ã€‚

ã¡ã‚‡ã†ã©ã‚¯ãƒ©ã‚¦ãƒ‰åˆ©ç”¨ãŒæ€¥é€Ÿã«åºƒãŒã‚Šå§‹ã‚ãŸæ™‚æœŸã§ã€ã€Œè¨­å®šç®¡ç†ã‚‚SQLã§å®Œçµã•ã›ãŸã„ã€ã¨ã„ã†æµã‚Œã«åˆè‡´ã—ã¦ã„ã¾ã—ãŸã€‚

|ãƒ­ã‚¸ã‚«ãƒ«ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦
|ã¾ãšã€å¤§å‰æã¨ã—ã¦ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã¯ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ãŒè»¢é€ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã¨åŒã˜å®šç¾©ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ‰‹å‹•ã§ä½œæˆã—ã¦ãŠã‹ãªã„ã¨ã„ã‘ãªã„ã€‚ +

ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼å´ã¯ã€ä½œæˆã—ã‚ˆã†ã¨ã™ã‚‹ãƒ‘ãƒ–ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åãŒæ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã€ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚é‡è¤‡ã—ãªã„åç§°ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ +

ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼å´ã¯ CREATE SUBSCRIPTION ~~ ã®æœ€å¾Œã«WITH(enabled = false)ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã€Œã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¯ä½œæˆã•ã‚Œã‚‹ãŒã€ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œã¯é–‹å§‹ã•ã‚Œãªã„ã€ã¨ã„ã†çŠ¶æ…‹ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ +
ã“ã®çŠ¶æ…‹ã§ã¯ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«æƒ…å ±ãŒé€ä¿¡ã•ã‚Œãªã„ã®ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«æƒ…å ±ãŒä¸€è‡´ã—ãªã„

|PostgreSQLã§ã®å…¥ã‚Œå­ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
|PostgreSQLã¯å…¥ã‚Œå­ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ã„ãªã„ã€‚ +
ã ã‹ã‚‰ã€BEGIN;ã‚’å®£è¨€ã—ãŸå¾Œã«ã•ã‚‰ã«ç¶šã‘ã¦BEGIN;ã‚’å®£è¨€ã™ã‚‹ã®ã¯ã‚‚ã¡ã‚ã‚“ä¸å¯èƒ½ã ã—ã€ +
BEGIN;ã®å¾Œã« CALL sample_proc();ã§PROCEDUREã‚’å‘¼ã³å‡ºã—ãŸéš›ã€ã“ã®PROCEDUREãŒå†…éƒ¨ã§BEGIN;ã‚’å®£è¨€ã—ã¦ã„ã‚‹å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚

|PITRã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å˜ä½
|PITRã¯ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿å…¨ä½“ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¯¾è±¡ã¨ã—ã¾ã™ã€‚ +
ãƒ†ãƒ¼ãƒ–ãƒ«å˜ä½ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ã§ããªã„ã€‚

|PITRæ‰‹é †
|PITRã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹é †ã§ä½¿ç”¨ã—ã¾ã™ã€‚ +
1) äº‹å‰è¨­å®š +
2) ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— +
3) ãƒªã‚«ãƒãƒª +
äº‹å‰è¨­å®šã§ã¯ã€Œpostgresql.confã€ãƒ•ã‚¡ã‚¤ãƒ«ã«ãŠã„ã¦ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã—ã¦ä¿å­˜ã™ã‚‹è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚ã¾ãŸã€ãƒªã‚«ãƒãƒªæ™‚ã«ã¯ã€Œrecovery.signalã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦é…ç½®ã—ã¾ã™ã€‚ +
ã€Œpostgresql.confã€ãƒ•ã‚¡ã‚¤ãƒ«ã«ãŠã„ã¦ã€ãƒªã‚«ãƒãƒªãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ +
PITRã§ä½¿ç”¨ã™ã‚‹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ç‰©ç†ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ã‚ã‚‹ãŸã‚ã€OSã‚³ãƒãƒ³ãƒ‰ã®tarã‚„rsyncã‚³ãƒãƒ³ãƒ‰ã€pg_basebackupã‚³ãƒãƒ³ãƒ‰ãªã©ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

|ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
|INFOâ€¦ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰å‡ºåŠ›ã‚’è¦æ±‚ã•ã‚ŒãŸæƒ…å ± +
NOTICEâ€¦ãƒ¦ãƒ¼ã‚¶ã«ã¨ã£ã¦å½¹ç«‹ã¤æƒ…å ± +
WARNINGâ€¦ä¸é©åˆ‡ãªã‚³ãƒãƒ³ãƒ‰ä½¿ç”¨ç­‰ã«å¯¾ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã¸ã®è­¦å‘Š +
ERRORâ€¦ç‰¹å®šã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä¸­æ–­ã•ã›ãŸã‚¨ãƒ©ãƒ¼ +
LOGâ€¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†è€…ã«ã¨ã£ã¦å½¹ç«‹ã¤ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„å†…éƒ¨ã®å‡¦ç†ã«é–¢ã™ã‚‹æƒ…å ± +
FATALâ€¦ç‰¹å®šã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¸­æ–­ã•ã›ãŸã‚¨ãƒ©ãƒ¼ +
PANICâ€¦å…¨ã¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¸­æ–­ã•ã›ãŸè‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼

|GRANTã§ä»˜ä¸ã§ãã‚‹æ¨©é™
|SELECTãƒ»INSERTãƒ»UPDATEãƒ»DELETEãƒ»TRUNCATEãƒ»REFERENCESãƒ»TRIGGERãƒ»CONNECTãƒ»CREATE +
åŸºæœ¬çš„ã«ã¯DMLãŒãƒ¡ã‚¤ãƒ³ã€‚ ãªãœãªã‚‰ãã‚Œä»¥ä¸Šã®æ¨©é™ã‚’ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¸ãˆã‚‹ã¹ãã§ã¯ãªã„ã‹ã‚‰ã€‚ +
TRRIGERã‚‚ã€ä½œæˆã¯ã§ãã¦ã‚‚å‰Šé™¤ã¯ã§ããªã„ã€‚ +
ãƒ†ãƒ¼ãƒ–ãƒ«å‰Šé™¤é–¢é€£ã‚‚ã€DELETEã‚„TRUNCATEã¯è¨±å¯ã—ã¦ã‚‚DROPã¾ã§ã¯è¨±å¯ã—ãªã„ã€‚

ï¼ˆã•ã‚‰ã«è©³ã—ãï¼‰ +
ã€ä¸»ãªæ¨©é™ã€‘ +
ãƒ»SELECTã¨COPY TOã®å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹(SELECT) +
ãƒ»INSERTã¨COPY FROMã®å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹(INSERT) +
ãƒ»UPDATEã®å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹(UPDATE) +
ãƒ»DELETEã®å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹(DELETE) +
ãƒ»TRUNCATEã®å®Ÿè¡Œ(ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ãƒ‡ãƒ¼ã‚¿ã‚’é«˜é€Ÿã§å‰Šé™¤)ã‚’è¨±å¯ã™ã‚‹(TRUNCATE) +
ãƒ»å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’è¨±å¯ã™ã‚‹(REFERENCES) +
ãƒ»ãƒˆãƒªã‚¬ãƒ¼ã®ä½œæˆã‚’è¨±å¯ã™ã‚‹(TRIGGER) +
ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶šã‚’è¨±å¯ã™ã‚‹(CONNECT) +
ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å¯¾ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆã‚’è¨±å¯ã™ã‚‹(CREATE) +
ãƒ»ã‚¹ã‚­ãƒ¼ãƒã«å¯¾ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã‚’è¨±å¯ã™ã‚‹(CREATE)

|PITRã§ãƒ†ãƒ¼ãƒ–ãƒ«å˜ä½ã®æŒ‡å®šã¯å¯èƒ½ã‹ï¼Ÿ
|çµè«– ï¼š ä¸å¯ã€‚ +
PITRã§ä½¿ã†pg_bacebackupã‚„pg_start_backupã«ã¯ãã‚‚ãã‚‚ãƒ†ãƒ¼ãƒ–ãƒ«åã‚’æŒ‡å®šã™ã‚‹å ´æ‰€ãŒãªã„ã€‚ pg_start_backupã®ç¬¬ä¸€å¼•æ•°ã«ã¯ãƒ©ãƒ™ãƒ«åã‚’å…¥ã‚Œã‚‹å ´æ‰€ãŒã‚ã‚‹ã®ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«åã¨æ··åŒã—ãªã„ã“ã¨ã€‚ ä»¥ä¸‹ã€pg_start_backupã®å¼•æ•° +

pg_start_backup(ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ©ãƒ™ãƒ«å [, ãƒ•ã‚¡ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ [, æ’ä»–ã¾ãŸã¯éæ’ä»–]] )

ãƒ»ç¬¬1å¼•æ•°ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ©ãƒ™ãƒ«åï¼‰: ä»»æ„ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ©ãƒ™ãƒ«åã‚’æŒ‡å®šã™ã‚‹ã€€â€»å¿…é ˆ +
ãƒ»ç¬¬2å¼•æ•°ï¼ˆãƒ•ã‚¡ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®æŒ‡å®šï¼‰: trueã¾ãŸã¯falseã‚’æŒ‡å®šã™ã‚‹ã€‚trueã‚’æŒ‡å®šã™ã‚‹ã¨ã€ã‚µãƒ¼ãƒä¸Šã®åˆ©ç”¨å¯èƒ½ãªãƒªã‚½ãƒ¼ã‚¹ã‚’å¯èƒ½ãªé™ã‚Šä½¿ç”¨ã—ã¦å³æ™‚ã«ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯falseï¼‰ +

ãƒ»ç¬¬3å¼•æ•°ï¼ˆæ’ä»–ã¾ãŸã¯éæ’ä»–ã‚’æŒ‡å®šï¼‰: trueã¾ãŸã¯falseã‚’æŒ‡å®šã™ã‚‹ã€‚trueã‚’æŒ‡å®šã™ã‚‹ã¨ã€Œæ’ä»–ãƒ¢ãƒ¼ãƒ‰ã€ã€falseã‚’æŒ‡å®šã™ã‚‹ã¨ã€Œéæ’ä»–ãƒ¢ãƒ¼ãƒ‰ã€ã§å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯trueï¼‰

|PostgreSQL ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ vs SQLãƒšã‚¢ä¸€è¦§
|image:osã‚³ãƒãƒ³ãƒ‰vsSQL.png[]

|ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸå ´åˆ
|ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»¥å¤–ã®å‡¦ç†ã‚’å—ã‘ä»˜ã‘ãªããªã‚Šã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã®å‡¦ç†ã¯å…¨ã¦å–ã‚Šæ¶ˆã•ã‚Œã¾ã™ã€‚




